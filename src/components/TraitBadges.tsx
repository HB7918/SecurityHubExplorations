import { Trait } from '../types';

const ALL_TRAITS = ['Reachability', 'Sensitive Data', 'Vulnerability', 'Misconfiguration', 'Assumability'] as const;

const traitPaths: Record<string, string> = {
  'Reachability': 'M12.5 3.527c-.45.221-.983.404-1.574.54-.268-.882-.63-1.61-1.063-2.136a7.5 7.5 0 0 1 2.637 1.596Zm-1.071 3.985a18.5 18.5 0 0 0-.336-2.818 8.3 8.3 0 0 0 1.854-.664A7.47 7.47 0 0 1 14.324 7.512h-2.895Zm-.43 3.868c.254-.947.406-2.04.43-3.218h2.912a7.48 7.48 0 0 1-1.443 3.873 7.2 7.2 0 0 0-1.899-.655Zm-.19.623c.608.132 1.157.312 1.624.533a7.49 7.49 0 0 1-2.813 1.595c.475-.493.882-1.224 1.19-2.128Zm-5.24.05c.328.947.765 1.703 1.277 2.186a7.48 7.48 0 0 1-3.058-1.5c.478-.285 1.087-.517 1.78-.686Zm-.637-3.89c.026 1.2.184 2.312.447 3.271a8.5 8.5 0 0 0-2.064.834 7.48 7.48 0 0 1-1.654-4.105h3.271Zm.35-3.528a18.4 18.4 0 0 0-.35 2.877H1.676a7.48 7.48 0 0 1 1.585-3.722c.532.352 1.225.639 2.021.845Zm.17-.624a8.2 8.2 0 0 1-1.726-.692 7.49 7.49 0 0 1 2.867-1.505c-.466.522-.856 1.276-1.141 2.197Zm.133 3.5c.021-1.03.14-1.948.33-2.734a11.5 11.5 0 0 0 2.394.222c.746 0 1.473-.062 2.152-.178.184.776.299 1.679.32 2.69h-5.195Zm4.586 4.374c-.51 1.448-1.263 2.3-1.989 2.3-.72 0-1.467-.838-1.977-2.264a12.4 12.4 0 0 1 2.103-.177c.646 0 1.272.05 1.863.141ZM8.307 11.093c-.802 0-1.58.072-2.298.205-.245-.886-.427-1.944-.452-3.135h5.21c-.025 1.173-.167 2.218-.406 3.095a12.5 12.5 0 0 0-2.054-.165Zm.013-9.426c.738.102 1.492 1 1.968 2.524a11.5 11.5 0 0 1-1.981.158 12 12 0 0 1-2.22-.197c.495-1.557 1.28-2.453 2.039-2.494l.194.01ZM8.37 1.019 8.18 1c-.02 0-.04.005-.06.006-.04 0-.08-.006-.12-.006C4.14 1 1 4.14 1 8s3.14 7 7 7 7-3.14 7-7c0-3.735-2.943-6.787-6.63-6.981Z',
  'Sensitive Data': 'M12.6359 8.35C12.1366 7.954 11.7147 7.621 11.3558 7.344C11.6477 6.738 11.9664 6.096 12.182 5.771C12.835 6.449 14.2657 8.753 14.7805 10.003C14.1667 9.564 13.2899 8.869 12.6359 8.35ZM8.54069 10.457C8.33438 10.272 7.99191 9.839 7.60612 9.313C7.60921 9.309 7.61127 9.306 7.61437 9.302C8.1126 8.588 8.91617 7.437 9.28134 7.105C9.45773 7.2 9.7414 7.397 10.0767 7.643C9.60524 8.63 8.87078 10.143 8.54069 10.457ZM5.71737 10.183C5.53891 9.914 5.30784 9.506 5.14796 9.227C4.57751 8.223 4.34232 7.806 3.90082 7.791C3.59858 7.773 3.32419 7.977 2.20188 8.98C2.0554 9.11 1.88313 9.264 1.70468 9.42C2.37414 8.178 3.36545 6.494 3.88019 5.753C4.19894 6.181 4.70027 6.915 5.12526 7.541C5.60802 8.249 6.01135 8.835 6.35383 9.32C6.12379 9.646 5.89066 9.966 5.71737 10.183ZM15.5768 9.293C15.5552 9.246 13.2816 4.637 12.1397 4.637C11.6126 4.637 11.2629 5.187 10.5202 6.716C9.85178 6.234 9.51756 6.069 9.25864 6.06C9.25039 6.06 9.24214 6.06 9.23285 6.06C8.73049 6.06 8.29003 6.561 6.97688 8.431C6.62306 7.924 6.27233 7.409 5.9866 6.99C4.41144 4.678 4.27527 4.515 3.88948 4.501C3.88741 4.5 3.88535 4.5 3.88226 4.5C2.95387 4.5 0.138798 10.275 0.115072 10.333C0.0304861 10.543 -0.12734 10.934 0.188312 11.197C0.736059 11.657 1.41275 11.043 2.90023 9.715C3.187 9.459 3.54494 9.139 3.79251 8.939C3.93177 9.157 4.11023 9.473 4.24433 9.709C4.89523 10.854 5.20263 11.362 5.68951 11.375C6.04024 11.376 6.27027 11.183 6.98719 10.19C7.78045 11.24 8.13117 11.5 8.48911 11.5H8.49737C9.24833 11.492 9.83527 10.507 10.9091 8.278C11.2825 8.568 11.6601 8.867 11.9829 9.123C14.7206 11.296 15.321 11.739 15.8069 11.225C16.1215 10.893 16.0565 10.351 15.5768 9.293Z',
  'Vulnerability': 'M14.8023 14.2652C14.552 14.5381 14.1233 14.5615 13.8443 14.3149L10.4912 11.3228C10.8266 11.0225 11.1292 10.6897 11.3928 10.3255L14.752 13.3186C15.029 13.5662 15.0505 13.9913 14.8023 14.2652ZM6.777 4.62642C6.33285 4.62642 5.9718 4.26826 5.9718 3.82995C5.9718 3.39062 6.33285 3.03348 6.777 3.03348C7.22011 3.03348 7.58219 3.39062 7.58219 3.82995C7.58219 4.26826 7.22011 4.62642 6.777 4.62642ZM6.11745 7.32224C6.9247 7.32224 7.58219 7.97159 7.58219 8.77009C7.58219 9.56859 6.9247 10.2179 6.11745 10.2179C5.3102 10.2179 4.65374 9.56859 4.65374 8.77009C4.65374 7.97159 5.3102 7.32224 6.11745 7.32224ZM1.02573 6.71753C1.02573 3.84821 3.38491 1.51461 6.28465 1.51461C9.18438 1.51461 11.5436 3.84821 11.5436 6.71753C11.5436 7.42877 11.3979 8.10653 11.1343 8.72545L8.56587 8.35511C8.43457 7.5972 7.95146 6.96408 7.28986 6.611V5.55885C8.0489 5.33868 8.60792 4.65077 8.60792 3.82995C8.60792 2.83157 7.78631 2.01887 6.777 2.01887C5.76665 2.01887 4.94607 2.83157 4.94607 3.82995C4.94607 4.65077 5.50509 5.33868 6.26413 5.55885V6.32183C6.2149 6.31981 6.16771 6.30763 6.11745 6.30763C5.39739 6.30763 4.75221 6.61709 4.29781 7.10308L3.70596 6.51157C3.95111 6.13515 4.09676 5.68973 4.09676 5.20881C4.09676 4.38291 3.67724 3.62196 2.97462 3.17553L2.4197 4.02882C2.82794 4.28856 3.07103 4.72991 3.07103 5.20881C3.07103 5.98295 2.43406 6.61303 1.65245 6.61303V7.62764C2.14275 7.62764 2.60022 7.48052 2.98282 7.23295L3.76135 8.01015C3.68237 8.25162 3.62801 8.50325 3.62801 8.77009C3.62801 10.1276 4.74503 11.2325 6.11745 11.2325C7.2796 11.2325 8.24892 10.4391 8.52381 9.37378L10.603 9.67309C9.65212 11.0276 8.07352 11.9184 6.28465 11.9184C3.38491 11.9184 1.02573 9.58584 1.02573 6.71753ZM15.4393 12.5647L11.9272 9.43669C12.3344 8.61384 12.5693 7.69257 12.5693 6.71753C12.5693 3.28916 9.74956 0.5 6.28465 0.5C2.81973 0.5 0 3.28916 0 6.71753C0 10.1449 2.81973 12.934 6.28465 12.934C7.52886 12.934 8.68588 12.5698 9.6634 11.9499L13.1581 15.0688C13.4832 15.358 13.8904 15.5 14.2966 15.5C14.7633 15.5 15.228 15.3123 15.5644 14.944C16.1911 14.2541 16.1347 13.1867 15.4393 12.5647Z',
  'Misconfiguration': 'M8 14c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6Zm0-13c-3.859 0-7 3.14-7 7s3.141 7 7 7 7-3.14 7-7-3.141-7-7-7Zm2.446 7.563c0 .107-.027 2.432-1.946 2.78V4.622l1.946.843v3.098Zm-4.892-.009V5.465l1.946-.843v6.721c-1.906-.351-1.945-2.683-1.946-2.789Zm5.592-3.876-2.947-1.277a.5.5 0 0 0-.398 0l-2.947 1.277a.5.5 0 0 0-.308.459v3.417c0 1.327.72 3.837 3.446 3.837s3.446-2.504 3.446-3.828V5.137a.5.5 0 0 0-.292-.459Z',
  'Assumability': 'M1 13.5H15V2.5H1V13.5ZM16 2V14C16 14.276 15.776 14.5 15.5 14.5H0.5C0.224 14.5 0 14.276 0 14V2C0 1.724 0.224 1.5 0.5 1.5H15.5C15.776 1.5 16 1.724 16 2ZM3 10.498L6.998 10.5L7 7.502L3.002 7.5L3 10.498ZM4 6.5L6 6.501V5.354C6 4.764 5.645 4.439 5 4.439H4.999C4.67 4.439 4.407 4.527 4.239 4.693C4.042 4.888 4.001 5.159 4.001 5.352L4 6.5ZM2.146 11.352C2.053 11.258 2 11.13 2 10.998L2.002 7C2.002 6.724 2.226 6.5 2.502 6.5H3L3.001 5.352C3.001 4.801 3.187 4.327 3.537 3.981C3.896 3.627 4.401 3.439 4.999 3.439H5C6.196 3.439 7 4.208 7 5.354V6.502H7.5C7.633 6.502 7.76 6.555 7.854 6.648C7.947 6.742 8 6.87 8 7.002L7.998 11C7.998 11.276 7.774 11.5 7.498 11.5L2.5 11.498C2.367 11.498 2.24 11.445 2.146 11.352ZM10 9.5H12V8.5H10V9.5ZM10 6.5H14V5.5H10V6.5Z',
};

export default function TraitBadges({ activeTraits }: { activeTraits: Trait[] }) {
  const activeCategories = new Set(activeTraits.map(t => t.category));
  return (
    <div style={{ display: 'flex', gap: 2 }}>
      {ALL_TRAITS.map(trait => {
        const isActive = activeCategories.has(trait as Trait['category']);
        return (
          <div
            key={trait}
            title={trait}
            style={{
              width: 30, height: 20, borderRadius: 4,
              backgroundColor: isActive ? '#414D5C' : '#d5dbdb',
              display: 'flex', alignItems: 'center', justifyContent: 'center',
              opacity: isActive ? 1 : 0.6,
            }}
          >
            <svg width="14" height="14" viewBox="0 0 16 16" fill="none">
              <path d={traitPaths[trait]} fill={isActive ? '#FBFBFB' : '#687078'} fillRule="evenodd" clipRule="evenodd" />
            </svg>
          </div>
        );
      })}
    </div>
  );
}
