"use client";
import {
  getExternalProps
} from "./chunk-4XCIQI6J.js";
import {
  CollectionLabelContext
} from "./chunk-MPA22SQO.js";
import {
  InfoLinkLabelContext
} from "./chunk-2AAANRJG.js";
import {
  usePortalModeClasses
} from "./chunk-CKCCOMMJ.js";
import {
  FormFieldContext
} from "./chunk-5ERC7DBW.js";
import {
  isDevelopment
} from "./chunk-TIE5RIC4.js";
import {
  ButtonContext,
  PopoverContainer,
  arrow_default,
  body_default,
  getFirstFocusable,
  internal_default,
  styles_css_default
} from "./chunk-SEHBNKMU.js";
import "./chunk-P5S5N54A.js";
import "./chunk-IAABOS4E.js";
import "./chunk-MB7IPIMX.js";
import {
  KeyCode,
  useInternalI18n
} from "./chunk-5MCAYQBG.js";
import {
  fireNonCancelableEvent
} from "./chunk-VNUF7DEA.js";
import "./chunk-YSEWQXSB.js";
import "./chunk-K3E5QKFE.js";
import "./chunk-764U3PF5.js";
import {
  LinkDefaultVariantContext,
  defaultValue
} from "./chunk-X3Z5OJ23.js";
import "./chunk-KRX53BPJ.js";
import {
  Portal,
  SingleTabStopNavigationReset,
  applyDisplayName,
  clsx_m_default,
  getBaseProps,
  useBaseComponent,
  useMergeRefs,
  useSingleTabStopNavigation,
  useUniqueId,
  warnOnce
} from "./chunk-WYPZEXZR.js";
import "./chunk-BVI7NZOO.js";
import {
  require_react
} from "./chunk-4HAMFFQC.js";
import {
  __toESM
} from "./chunk-EQCVQC35.js";

// node_modules/@cloudscape-design/components/popover/index.js
var import_react4 = __toESM(require_react());

// node_modules/@cloudscape-design/components/popover/internal.js
var import_react3 = __toESM(require_react());

// node_modules/@cloudscape-design/components/internal/context/reset-contexts-for-modal.js
var import_react = __toESM(require_react());
var ResetContextsForModal = ({ children }) => import_react.default.createElement(
  ButtonContext.Provider,
  { value: { onClick: () => {
  } } },
  import_react.default.createElement(
    CollectionLabelContext.Provider,
    { value: { assignId: () => {
    } } },
    import_react.default.createElement(
      FormFieldContext.Provider,
      { value: {} },
      import_react.default.createElement(
        InfoLinkLabelContext.Provider,
        { value: "" },
        import_react.default.createElement(
          LinkDefaultVariantContext.Provider,
          { value: defaultValue },
          import_react.default.createElement(SingleTabStopNavigationReset, null, children)
        )
      )
    )
  )
);
var reset_contexts_for_modal_default = ResetContextsForModal;

// node_modules/@cloudscape-design/components/popover/conditional-live-region.js
var import_react2 = __toESM(require_react());
var ConditionalLiveRegion = ({ condition, children }) => {
  if (condition) {
    return import_react2.default.createElement(internal_default, null, children);
  }
  return import_react2.default.createElement(import_react2.default.Fragment, null, children);
};
var conditional_live_region_default = ConditionalLiveRegion;

// node_modules/@cloudscape-design/components/popover/internal.js
var internal_default2 = import_react3.default.forwardRef(InternalPopover);
function InternalPopover({ position = "right", size = "medium", fixedWidth = false, triggerType = "text", dismissButton = true, children, header, content, triggerAriaLabel, wrapTriggerText = true, isInline = false, renderWithPortal = false, __onOpen, __internalRootRef, __closeAnalyticsAction, ...restProps }, ref) {
  const baseProps = getBaseProps(restProps);
  const triggerRef = (0, import_react3.useRef)(null);
  const popoverRef = (0, import_react3.useRef)(null);
  const i18n = useInternalI18n("popover");
  const dismissAriaLabel = i18n("dismissAriaLabel", restProps.dismissAriaLabel);
  const [visible, setVisible] = (0, import_react3.useState)(false);
  const focusTrigger = (0, import_react3.useCallback)(() => {
    var _a, _b;
    if (["text", "text-inline"].includes(triggerType)) {
      (_a = triggerRef.current) === null || _a === void 0 ? void 0 : _a.focus();
    } else if (triggerRef.current) {
      (_b = getFirstFocusable(triggerRef.current)) === null || _b === void 0 ? void 0 : _b.focus();
    }
  }, [triggerType]);
  const onTriggerClick = (0, import_react3.useCallback)(() => {
    fireNonCancelableEvent(__onOpen);
    setVisible(true);
  }, [__onOpen]);
  const onDismiss = (0, import_react3.useCallback)(() => {
    setVisible(false);
    focusTrigger();
  }, [focusTrigger]);
  const onTriggerKeyDown = (0, import_react3.useCallback)((event) => {
    const isEscapeKey = event.keyCode === KeyCode.escape;
    const isTabKey = event.keyCode === KeyCode.tab;
    if (isEscapeKey && visible) {
      event.stopPropagation();
    }
    if (isTabKey || isEscapeKey) {
      setVisible(false);
    }
  }, [visible]);
  (0, import_react3.useImperativeHandle)(ref, () => ({
    dismiss: () => {
      setVisible(false);
    },
    focus: () => {
      setVisible(false);
      focusTrigger();
    }
  }));
  const clickFrameId = (0, import_react3.useRef)(null);
  (0, import_react3.useEffect)(() => {
    if (!triggerRef.current) {
      return;
    }
    const document = triggerRef.current.ownerDocument;
    const onDocumentClick = () => {
      if (clickFrameId.current === null) {
        setVisible(false);
      }
    };
    document.addEventListener("mousedown", onDocumentClick);
    return () => {
      document.removeEventListener("mousedown", onDocumentClick);
    };
  }, []);
  const popoverClasses = usePortalModeClasses(triggerRef, { resetVisualContext: true });
  const triggerProps = {
    // https://github.com/microsoft/TypeScript/issues/36659
    ref: triggerRef,
    onClick: onTriggerClick,
    onKeyDown: onTriggerKeyDown,
    className: clsx_m_default(styles_css_default.trigger, styles_css_default[`trigger-type-${triggerType}`])
  };
  const { tabIndex: triggerTabIndex } = useSingleTabStopNavigation(triggerRef);
  const referrerId = useUniqueId();
  const popoverContent = import_react3.default.createElement(
    "div",
    { className: clsx_m_default(popoverClasses, !renderWithPortal && styles_css_default["popover-inline-content"]), "data-awsui-referrer-id": referrerId },
    import_react3.default.createElement(
      PopoverContainer,
      { size, fixedWidth, position, trackRef: triggerRef, arrow: (position2) => import_react3.default.createElement(arrow_default, { position: position2 }), renderWithPortal, zIndex: renderWithPortal ? 7e3 : void 0 },
      import_react3.default.createElement(
        LinkDefaultVariantContext.Provider,
        { value: { defaultVariant: "primary" } },
        import_react3.default.createElement(
          body_default,
          { dismissButton, dismissAriaLabel, header, onDismiss, overflowVisible: "both", closeAnalyticsAction: __closeAnalyticsAction },
          import_react3.default.createElement(conditional_live_region_default, { condition: !dismissButton }, content)
        )
      )
    )
  );
  const mergedRef = useMergeRefs(popoverRef, __internalRootRef);
  return import_react3.default.createElement(
    "span",
    { ...baseProps, className: clsx_m_default(styles_css_default.root, baseProps.className, triggerType === "filtering-token" && styles_css_default["root-filtering-token"], isInline && styles_css_default["no-wrap"]), ref: mergedRef, onMouseDown: () => {
      clickFrameId.current = requestAnimationFrame(() => {
        clickFrameId.current = null;
      });
    } },
    ["text", "text-inline"].includes(triggerType) ? import_react3.default.createElement("button", { ...triggerProps, className: clsx_m_default(triggerProps.className, wrapTriggerText === false && styles_css_default["overflow-ellipsis"]), tabIndex: triggerTabIndex, type: "button", "aria-haspopup": "dialog", id: referrerId, "aria-label": triggerAriaLabel }, children) : import_react3.default.createElement("span", { ...triggerProps, id: referrerId }, children),
    visible && import_react3.default.createElement(reset_contexts_for_modal_default, null, renderWithPortal ? import_react3.default.createElement(Portal, null, popoverContent) : popoverContent)
  );
}

// node_modules/@cloudscape-design/components/popover/index.js
var Popover = import_react4.default.forwardRef(({ position = "right", size = "medium", fixedWidth = false, triggerType = "text", dismissButton = true, renderWithPortal = false, wrapTriggerText = true, header, ...rest }, ref) => {
  if (isDevelopment) {
    if (dismissButton && !header) {
      warnOnce("Popover", `You should provide a \`header\` when \`dismissButton\` is true.`);
    }
  }
  const baseComponentProps = useBaseComponent("Popover", {
    props: { dismissButton, fixedWidth, position, renderWithPortal, size, triggerType }
  });
  const externalProps = getExternalProps(rest);
  return import_react4.default.createElement(internal_default2, { ref, header, position, size, fixedWidth, triggerType, dismissButton, renderWithPortal, wrapTriggerText, ...externalProps, ...baseComponentProps });
});
applyDisplayName(Popover, "Popover");
var popover_default = Popover;
export {
  popover_default as default
};
//# sourceMappingURL=@cloudscape-design_components_popover.js.map
