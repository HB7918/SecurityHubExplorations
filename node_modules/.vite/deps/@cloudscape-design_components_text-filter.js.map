{
  "version": 3,
  "sources": ["../../src/text-filter/index.tsx", "../../src/text-filter/internal.tsx", "../../src/text-filter/analytics/use-table-integration.ts", "../../src/text-filter/search-results.tsx", "../../@cloudscape-design/components/text-filter/styles.css.js", "../../src/text-filter/use-debounce-search-result-callback.ts"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n'use client';\nimport React from 'react';\n\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport { GeneratedAnalyticsMetadataTextFilterComponent } from './analytics-metadata/interfaces';\nimport { TextFilterProps } from './interfaces';\nimport InternalTextFilter from './internal';\n\nexport { TextFilterProps };\n\nconst TextFilter = React.forwardRef((props: TextFilterProps, ref: React.Ref<TextFilterProps.Ref>) => {\n  const baseComponentProps = useBaseComponent('TextFilter', {\n    props: { disabled: props.disabled, disableBrowserAutocorrect: props.disableBrowserAutocorrect },\n  });\n\n  const componentAnalyticsMetadata: GeneratedAnalyticsMetadataTextFilterComponent = {\n    name: 'awsui.TextFilter',\n    label: 'input',\n    properties: {\n      disabled: `${!!props.disabled}`,\n      filteringText: props.filteringText || '',\n    },\n  };\n  return (\n    <InternalTextFilter\n      {...props}\n      {...baseComponentProps}\n      ref={ref}\n      {...getAnalyticsMetadataAttribute({ component: componentAnalyticsMetadata })}\n    />\n  );\n});\n\napplyDisplayName(TextFilter, 'TextFilter');\nexport default TextFilter;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useRef } from 'react';\nimport clsx from 'clsx';\n\nimport { useUniqueId } from '@cloudscape-design/component-toolkit/internal';\n\nimport InternalInput from '../input/internal';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { joinStrings } from '../internal/utils/strings';\nimport { InternalLiveRegionRef } from '../live-region/internal';\nimport { useTableIntegration } from './analytics/use-table-integration';\nimport { TextFilterProps } from './interfaces';\nimport { SearchResults } from './search-results';\nimport useDebounceSearchResultCallback from './use-debounce-search-result-callback';\n\nimport styles from './styles.css.js';\n\ntype InternalTextFilterProps = TextFilterProps & InternalBaseComponentProps;\n\nconst InternalTextFilter = React.forwardRef(\n  (\n    {\n      filteringText,\n      filteringAriaLabel,\n      filteringPlaceholder,\n      filteringClearAriaLabel,\n      controlId,\n      ariaLabelledby,\n      ariaDescribedby,\n      disabled,\n      countText,\n      disableBrowserAutocorrect,\n      onChange,\n      onDelayedChange,\n      loading = false,\n      style,\n      __internalRootRef,\n      ...rest\n    }: InternalTextFilterProps,\n    ref: React.Ref<TextFilterProps.Ref>\n  ) => {\n    const baseProps = getBaseProps(rest);\n    const inputRef = useRef<HTMLInputElement>(null);\n    const searchResultsRef = useRef<InternalLiveRegionRef>(null);\n    useForwardFocus(ref, inputRef);\n    useTableIntegration(filteringText, countText);\n\n    const searchResultsId = useUniqueId('text-filter-search-results');\n    const showResults = filteringText && countText && !disabled;\n\n    useDebounceSearchResultCallback({\n      searchQuery: filteringText,\n      countText,\n      loading,\n      announceCallback: () => {\n        searchResultsRef.current?.reannounce();\n      },\n    });\n\n    return (\n      <div {...baseProps} className={clsx(baseProps.className, styles.root)} ref={__internalRootRef}>\n        <InternalInput\n          __inheritFormFieldProps={true}\n          disableBrowserAutocorrect={disableBrowserAutocorrect}\n          ref={inputRef}\n          className={styles.input}\n          type=\"search\"\n          ariaLabel={filteringAriaLabel}\n          placeholder={filteringPlaceholder}\n          value={filteringText}\n          disabled={disabled}\n          controlId={controlId}\n          ariaLabelledby={ariaLabelledby}\n          ariaDescribedby={joinStrings(showResults ? searchResultsId : undefined, ariaDescribedby)}\n          autoComplete={false}\n          clearAriaLabel={filteringClearAriaLabel}\n          onChange={event => fireNonCancelableEvent(onChange, { filteringText: event.detail.value })}\n          __onDelayedInput={event => fireNonCancelableEvent(onDelayedChange, { filteringText: event.detail.value })}\n          style={style}\n        />\n        {showResults ? (\n          <SearchResults renderLiveRegion={!loading} id={searchResultsId} ref={searchResultsRef}>\n            {countText}\n          </SearchResults>\n        ) : null}\n      </div>\n    );\n  }\n);\n\nexport default InternalTextFilter;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useMemo } from 'react';\n\nimport { parseCountValue } from '../../internal/analytics/utils/parse-count-text';\nimport { useTableComponentsContext } from '../../internal/context/table-component-context';\n\n/**\n * Custom hook that integrates table counter values with table component context.\n *\n * The extracted count value is automatically synchronized with the table header\n * component through the table context, updating the countText property.\n */\nexport const useTableIntegration = (filteringText: string | undefined, countText: string | undefined) => {\n  const tableComponentContext = useTableComponentsContext();\n  const countValue = useMemo(() => parseCountValue(countText), [countText]);\n\n  useEffect(() => {\n    if (tableComponentContext?.filterRef?.current) {\n      tableComponentContext.filterRef.current.filterText = filteringText;\n      tableComponentContext.filterRef.current.filterCount = countValue;\n      tableComponentContext.filterRef.current.filtered = !!filteringText;\n\n      return () => {\n        delete tableComponentContext.filterRef.current?.filterText;\n        delete tableComponentContext.filterRef.current?.filterCount;\n        delete tableComponentContext.filterRef.current?.filtered;\n      };\n    }\n  }, [tableComponentContext?.filterRef, countValue, filteringText]);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useImperativeHandle, useRef } from 'react';\n\nimport InternalLiveRegion, { InternalLiveRegionRef } from '../live-region/internal';\n\nimport styles from './styles.css.js';\n\n// Debounce delay for live region (based on testing with VoiceOver)\nconst LIVE_REGION_DELAY = 2000;\n\ninterface SearchResultsProps {\n  id: string;\n  children: string;\n  renderLiveRegion: boolean;\n}\n\nexport const SearchResults = React.forwardRef(\n  ({ id, renderLiveRegion, children }: SearchResultsProps, ref?: React.Ref<InternalLiveRegionRef>) => {\n    const liveRegionRef = useRef<InternalLiveRegionRef>(null);\n\n    useImperativeHandle(\n      ref,\n      () => ({\n        reannounce: () => {\n          liveRegionRef.current?.reannounce();\n        },\n      }),\n      []\n    );\n\n    return (\n      <>\n        <span className={styles.results} id={id}>\n          {children}\n        </span>\n        {renderLiveRegion && (\n          <InternalLiveRegion delay={LIVE_REGION_DELAY} tagName=\"span\" hidden={true} ref={liveRegionRef}>\n            {children}\n          </InternalLiveRegion>\n        )}\n      </>\n    );\n  }\n);\n", "\n    import './styles.scoped.css';\n    export default {\n  \"root\": \"awsui_root_1sdq3_1y1he_145\",\n  \"input\": \"awsui_input_1sdq3_1y1he_180\",\n  \"results\": \"awsui_results_1sdq3_1y1he_184\"\n};\n  ", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useRef } from 'react';\n\nimport { useDebounceCallback } from '../internal/hooks/use-debounce-callback';\n\nexport interface DebouncedLiveAnnouncementProps {\n  searchQuery: any;\n  countText: string | undefined;\n  loading: boolean;\n  announceCallback: () => void;\n}\n\n// Debounce delay for live region (based on testing with VoiceOver)\nconst LIVE_REGION_DELAY = 2000;\n\nexport default function useDebounceSearchResultCallback({\n  searchQuery,\n  countText,\n  loading,\n  announceCallback,\n}: DebouncedLiveAnnouncementProps) {\n  const loadingRef = useRef(loading);\n\n  // announceCallback is called when:\n  // - For sync filters: on searchQuery/countText changes.\n  // - For async filters: on searchQuery/countText when loading completed and countText exists.\n  const debounceLiveAnnouncement = useDebounceCallback(() => {\n    if (!countText || loadingRef.current) {\n      return;\n    }\n    announceCallback();\n  }, LIVE_REGION_DELAY);\n\n  useEffect(() => {\n    loadingRef.current = loading;\n    debounceLiveAnnouncement();\n  }, [searchQuery, countText, loading, debounceLiveAnnouncement]);\n}\n"],
  "mappings": "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",
  "names": ["import_react", "import_react", "_a", "import_react", "React", "import_react", "LIVE_REGION_DELAY", "React", "internal_default", "React", "internal_default"]
}
