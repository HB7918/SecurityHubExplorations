{
  "version": 3,
  "sources": ["../../src/link/internal.tsx", "../../src/link/style.tsx", "../../@cloudscape-design/components/link/styles.css.js"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useContext, useRef } from 'react';\nimport clsx from 'clsx';\n\nimport { useMergeRefs, useUniqueId } from '@cloudscape-design/component-toolkit/internal';\nimport { useSingleTabStopNavigation } from '@cloudscape-design/component-toolkit/internal';\n\nimport { useInternalI18n } from '../i18n/context';\nimport InternalIcon from '../icon/internal';\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport {\n  DATA_ATTR_FUNNEL_VALUE,\n  getFunnelValueSelector,\n  getSubStepAllSelector,\n  getTextFromSelector,\n} from '../internal/analytics/selectors';\nimport { getBaseProps } from '../internal/base-component';\nimport { InfoLinkLabelContext } from '../internal/context/info-link-label-context';\nimport { LinkDefaultVariantContext } from '../internal/context/link-default-variant-context';\nimport { fireCancelableEvent, fireNonCancelableEvent, isPlainLeftClick } from '../internal/events';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport { KeyCode } from '../internal/keycode';\nimport { checkSafeUrl } from '../internal/utils/check-safe-url';\nimport WithNativeAttributes from '../internal/utils/with-native-attributes';\nimport { LinkProps } from './interfaces';\nimport { getLinkStyles } from './style';\n\nimport styles from './styles.css.js';\n\ntype InternalLinkProps = InternalBaseComponentProps &\n  Omit<LinkProps, 'variant'> & {\n    variant?: LinkProps['variant'] | 'top-navigation' | 'link' | 'recovery';\n  };\n\nconst InternalLink = React.forwardRef(\n  (\n    {\n      variant: providedVariant,\n      fontSize = 'body-m',\n      color = 'normal',\n      external = false,\n      target,\n      href,\n      rel,\n      ariaLabel,\n      externalIconAriaLabel,\n      onFollow,\n      onClick,\n      children,\n      nativeAttributes,\n      __internalRootRef,\n      style,\n      ...props\n    }: InternalLinkProps,\n    ref: React.Ref<LinkProps.Ref>\n  ) => {\n    checkSafeUrl('Link', href);\n    const isButton = !href;\n    const { defaultVariant } = useContext(LinkDefaultVariantContext);\n    const variant = providedVariant || defaultVariant;\n    const specialStyles = ['top-navigation', 'link', 'recovery'];\n    const hasSpecialStyle = specialStyles.indexOf(variant) > -1;\n\n    const i18n = useInternalI18n('link');\n    const baseProps = getBaseProps(props);\n    const anchorTarget = target ?? (external ? '_blank' : undefined);\n    const anchorRel = rel ?? (anchorTarget === '_blank' ? 'noopener noreferrer' : undefined);\n    const uniqueId = useUniqueId('link');\n    const linkId = useUniqueId('link-self');\n    const infoId = useUniqueId('link-info');\n\n    const infoLinkLabelFromContext = useContext(InfoLinkLabelContext);\n\n    const { funnelIdentifier, funnelInteractionId } = useFunnel();\n    const { stepIdentifier, stepNumber, stepNameSelector } = useFunnelStep();\n    const { subStepIdentifier, subStepSelector, subStepNameSelector } = useFunnelSubStep();\n\n    const fireFunnelEvent = (funnelInteractionId: string) => {\n      if (variant === 'info') {\n        const stepName = getTextFromSelector(stepNameSelector);\n        const subStepName = getTextFromSelector(subStepNameSelector);\n\n        FunnelMetrics.helpPanelInteracted({\n          funnelIdentifier,\n          funnelInteractionId,\n          stepIdentifier,\n          stepNumber,\n          stepName,\n          subStepIdentifier,\n          stepNameSelector,\n          subStepSelector,\n          subStepName,\n          subStepNameSelector,\n          elementSelector: getFunnelValueSelector(uniqueId),\n          subStepAllSelector: getSubStepAllSelector(),\n        });\n      } else if (external) {\n        const stepName = getTextFromSelector(stepNameSelector);\n        const subStepName = getTextFromSelector(subStepNameSelector);\n\n        FunnelMetrics.externalLinkInteracted({\n          funnelIdentifier,\n          funnelInteractionId,\n          stepIdentifier,\n          stepNumber,\n          stepName,\n          stepNameSelector,\n          subStepIdentifier,\n          subStepSelector,\n          subStepName,\n          subStepNameSelector,\n          elementSelector: getFunnelValueSelector(uniqueId),\n          subStepAllSelector: getSubStepAllSelector(),\n        });\n      }\n    };\n\n    const fireFollowEvent = (event: React.SyntheticEvent) => {\n      if (funnelInteractionId) {\n        fireFunnelEvent(funnelInteractionId);\n      }\n\n      fireCancelableEvent(onFollow, { href, external, target: anchorTarget }, event);\n    };\n\n    const fireClickEvent = (event: React.MouseEvent | React.KeyboardEvent) => {\n      const { altKey, ctrlKey, metaKey, shiftKey } = event;\n      const button = 'button' in event ? event.button : 0;\n      // make onClick non-cancelable to prevent it from being used to block full page reload\n      // for navigation use `onFollow` event instead\n      fireNonCancelableEvent(onClick, { altKey, button, ctrlKey, metaKey, shiftKey });\n    };\n\n    const handleLinkClick = (event: React.MouseEvent) => {\n      if (isPlainLeftClick(event)) {\n        fireFollowEvent(event);\n      }\n      fireClickEvent(event);\n    };\n\n    const handleButtonClick = (event: React.MouseEvent) => {\n      fireFollowEvent(event);\n      fireClickEvent(event);\n    };\n\n    const handleButtonKeyDown = (event: React.KeyboardEvent) => {\n      if (event.keyCode === KeyCode.space || event.keyCode === KeyCode.enter) {\n        event.preventDefault();\n        fireFollowEvent(event);\n        fireClickEvent(event);\n      }\n    };\n\n    const linkRef = useRef<HTMLElement>(null);\n    const isVisualRefresh = useVisualRefresh();\n    useForwardFocus(ref, linkRef);\n\n    // Visual refresh should only add styles to buttons that don't already have unique styles (e.g. primary/secondary variants)\n    const applyButtonStyles = isButton && isVisualRefresh && !hasSpecialStyle;\n\n    const sharedProps = {\n      id: linkId,\n      ...baseProps,\n      ref: useMergeRefs(linkRef, __internalRootRef),\n      className: clsx(\n        styles.link,\n        baseProps.className,\n        applyButtonStyles ? styles.button : null,\n        styles[getVariantStyle(variant)],\n        styles[getFontSizeStyle(variant, fontSize)],\n        styles[getColorStyle(variant, color)]\n      ),\n      style: getLinkStyles(style),\n      'aria-label': ariaLabel,\n      'aria-labelledby': undefined as string | undefined,\n      [DATA_ATTR_FUNNEL_VALUE]: uniqueId,\n    };\n\n    if (variant === 'info' && infoLinkLabelFromContext && !ariaLabel) {\n      sharedProps['aria-labelledby'] = `${sharedProps.id} ${infoId} ${infoLinkLabelFromContext}`;\n    }\n\n    const renderedExternalIconAriaLabel = i18n('externalIconAriaLabel', externalIconAriaLabel);\n    const content = (\n      <>\n        {children}\n        {external && (\n          <span className={styles['icon-wrapper']}>\n            &nbsp;\n            <span\n              className={styles.icon}\n              aria-label={renderedExternalIconAriaLabel}\n              role={renderedExternalIconAriaLabel ? 'img' : undefined}\n            >\n              <InternalIcon name=\"external\" size=\"inherit\" />\n            </span>\n          </span>\n        )}\n        {variant === 'info' && (\n          <span hidden={true} id={infoId}>\n            :\n          </span>\n        )}\n      </>\n    );\n\n    const { tabIndex } = useSingleTabStopNavigation(linkRef, { tabIndex: isButton ? 0 : undefined });\n\n    if (isButton) {\n      return (\n        <WithNativeAttributes\n          {...sharedProps}\n          tag=\"a\"\n          componentName=\"Link\"\n          nativeAttributes={nativeAttributes}\n          role=\"button\"\n          tabIndex={tabIndex}\n          onKeyDown={handleButtonKeyDown}\n          onClick={handleButtonClick}\n        >\n          {content}\n        </WithNativeAttributes>\n      );\n    }\n\n    return (\n      <WithNativeAttributes\n        {...sharedProps}\n        tag=\"a\"\n        componentName=\"Link\"\n        nativeAttributes={nativeAttributes}\n        tabIndex={tabIndex}\n        target={anchorTarget}\n        rel={anchorRel}\n        href={href}\n        onClick={handleLinkClick}\n      >\n        {content}\n      </WithNativeAttributes>\n    );\n  }\n);\n\nfunction getVariantStyle(variant: Exclude<InternalLinkProps['variant'], undefined>) {\n  return `variant-${variant.replace(/^awsui-/, '')}`;\n}\n\nfunction getFontSizeStyle(variant: InternalLinkProps['variant'], fontSize: InternalLinkProps['fontSize']) {\n  switch (variant) {\n    case 'info':\n      return 'font-size-body-s';\n    case 'awsui-value-large':\n      return 'font-size-display-l';\n    default:\n      return `font-size-${fontSize}`;\n  }\n}\n\nfunction getColorStyle(variant: InternalLinkProps['variant'], color: InternalLinkProps['color']) {\n  return `color-${variant === 'info' ? 'normal' : color}`;\n}\n\nexport default InternalLink;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { SYSTEM } from '../internal/environment';\nimport customCssProps from '../internal/generated/custom-css-properties';\nimport { LinkProps } from './interfaces';\n\nexport function getLinkStyles(style: LinkProps['style']) {\n  let properties = {};\n\n  if (style?.root && SYSTEM === 'core') {\n    properties = {\n      ...(style?.root?.color && {\n        [customCssProps.styleColorActive]: style.root.color?.active,\n        [customCssProps.styleColorDefault]: style.root.color?.default,\n        [customCssProps.styleColorHover]: style.root.color?.hover,\n      }),\n      ...(style.root?.focusRing && {\n        [customCssProps.styleFocusRingBorderColor]: style.root.focusRing?.borderColor,\n        [customCssProps.styleFocusRingBorderRadius]: style.root.focusRing?.borderRadius,\n        [customCssProps.styleFocusRingBorderWidth]: style.root.focusRing?.borderWidth,\n      }),\n    };\n  }\n\n  return properties;\n}\n", "\n    import './styles.scoped.css';\n    export default {\n  \"link\": \"awsui_link_4c84z_d4kf1_145\",\n  \"variant-secondary\": \"awsui_variant-secondary_4c84z_d4kf1_212\",\n  \"variant-primary\": \"awsui_variant-primary_4c84z_d4kf1_247\",\n  \"variant-info\": \"awsui_variant-info_4c84z_d4kf1_280\",\n  \"variant-value-large\": \"awsui_variant-value-large_4c84z_d4kf1_315\",\n  \"variant-top-navigation\": \"awsui_variant-top-navigation_4c84z_d4kf1_347\",\n  \"variant-recovery\": \"awsui_variant-recovery_4c84z_d4kf1_382\",\n  \"button\": \"awsui_button_4c84z_d4kf1_415\",\n  \"color-inverted\": \"awsui_color-inverted_4c84z_d4kf1_450\",\n  \"font-size-body-s\": \"awsui_font-size-body-s_4c84z_d4kf1_471\",\n  \"font-size-body-m\": \"awsui_font-size-body-m_4c84z_d4kf1_478\",\n  \"font-size-heading-xs\": \"awsui_font-size-heading-xs_4c84z_d4kf1_484\",\n  \"font-size-heading-s\": \"awsui_font-size-heading-s_4c84z_d4kf1_490\",\n  \"font-size-heading-m\": \"awsui_font-size-heading-m_4c84z_d4kf1_497\",\n  \"font-size-heading-l\": \"awsui_font-size-heading-l_4c84z_d4kf1_504\",\n  \"font-size-heading-xl\": \"awsui_font-size-heading-xl_4c84z_d4kf1_511\",\n  \"font-size-display-l\": \"awsui_font-size-display-l_4c84z_d4kf1_518\",\n  \"font-size-inherit\": \"awsui_font-size-inherit_4c84z_d4kf1_525\",\n  \"icon-wrapper\": \"awsui_icon-wrapper_4c84z_d4kf1_533\",\n  \"icon\": \"awsui_icon_4c84z_d4kf1_533\"\n};\n  "],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,mBAA0C;;;ACIpC,SAAU,cAAc,OAAyB;;AACrD,MAAI,aAAa,CAAA;AAEjB,OAAI,UAAK,QAAL,UAAK,SAAA,SAAL,MAAO,SAAQ,WAAW,QAAQ;AACpC,iBAAa;MACX,KAAI,KAAA,UAAK,QAAL,UAAK,SAAA,SAAL,MAAO,UAAI,QAAA,OAAA,SAAA,SAAA,GAAE,UAAS;QACxB,CAAC,8BAAe,gBAAgB,IAAG,KAAA,MAAM,KAAK,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE;QACrD,CAAC,8BAAe,iBAAiB,IAAG,KAAA,MAAM,KAAK,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE;QACtD,CAAC,8BAAe,eAAe,IAAG,KAAA,MAAM,KAAK,WAAK,QAAA,OAAA,SAAA,SAAA,GAAE;;MAEtD,KAAI,KAAA,MAAM,UAAI,QAAA,OAAA,SAAA,SAAA,GAAE,cAAa;QAC3B,CAAC,8BAAe,yBAAyB,IAAG,KAAA,MAAM,KAAK,eAAS,QAAA,OAAA,SAAA,SAAA,GAAE;QAClE,CAAC,8BAAe,0BAA0B,IAAG,KAAA,MAAM,KAAK,eAAS,QAAA,OAAA,SAAA,SAAA,GAAE;QACnE,CAAC,8BAAe,yBAAyB,IAAG,KAAA,MAAM,KAAK,eAAS,QAAA,OAAA,SAAA,SAAA,GAAE;;;EAGxE;AAEA,SAAO;AACT;;;ACxBI,OAAO;AACP,IAAO,qBAAQ;AAAA,EACjB,QAAQ;AAAA,EACR,qBAAqB;AAAA,EACrB,mBAAmB;AAAA,EACnB,gBAAgB;AAAA,EAChB,uBAAuB;AAAA,EACvB,0BAA0B;AAAA,EAC1B,oBAAoB;AAAA,EACpB,UAAU;AAAA,EACV,kBAAkB;AAAA,EAClB,oBAAoB;AAAA,EACpB,oBAAoB;AAAA,EACpB,wBAAwB;AAAA,EACxB,uBAAuB;AAAA,EACvB,uBAAuB;AAAA,EACvB,uBAAuB;AAAA,EACvB,wBAAwB;AAAA,EACxB,uBAAuB;AAAA,EACvB,qBAAqB;AAAA,EACrB,gBAAgB;AAAA,EAChB,QAAQ;AACV;;;AFeA,IAAM,eAAe,aAAAA,QAAM,WACzB,CACE,EACE,SAAS,iBACT,WAAW,UACX,QAAQ,UACR,WAAW,OACX,QACA,MACA,KACA,WACA,uBACA,UACA,SACA,UACA,kBACA,mBACA,OACA,GAAG,MAAK,GAEV,QACE;AACF,eAAa,QAAQ,IAAI;AACzB,QAAM,WAAW,CAAC;AAClB,QAAM,EAAE,eAAc,QAAK,yBAAW,yBAAyB;AAC/D,QAAM,UAAU,mBAAmB;AACnC,QAAM,gBAAgB,CAAC,kBAAkB,QAAQ,UAAU;AAC3D,QAAM,kBAAkB,cAAc,QAAQ,OAAO,IAAI;AAEzD,QAAM,OAAO,gBAAgB,MAAM;AACnC,QAAM,YAAY,aAAa,KAAK;AACpC,QAAM,eAAe,WAAM,QAAN,WAAM,SAAN,SAAW,WAAW,WAAW;AACtD,QAAM,YAAY,QAAG,QAAH,QAAG,SAAH,MAAQ,iBAAiB,WAAW,wBAAwB;AAC9E,QAAM,WAAW,YAAY,MAAM;AACnC,QAAM,SAAS,YAAY,WAAW;AACtC,QAAM,SAAS,YAAY,WAAW;AAEtC,QAAM,+BAA2B,yBAAW,oBAAoB;AAEhE,QAAM,EAAE,kBAAkB,oBAAmB,IAAK,UAAS;AAC3D,QAAM,EAAE,gBAAgB,YAAY,iBAAgB,IAAK,cAAa;AACtE,QAAM,EAAE,mBAAmB,iBAAiB,oBAAmB,IAAK,iBAAgB;AAEpF,QAAM,kBAAkB,CAACC,yBAA+B;AACtD,QAAI,YAAY,QAAQ;AACtB,YAAM,WAAW,oBAAoB,gBAAgB;AACrD,YAAM,cAAc,oBAAoB,mBAAmB;AAE3D,oBAAc,oBAAoB;QAChC;QACA,qBAAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uBAAuB,QAAQ;QAChD,oBAAoB,sBAAqB;OAC1C;IACH,WAAW,UAAU;AACnB,YAAM,WAAW,oBAAoB,gBAAgB;AACrD,YAAM,cAAc,oBAAoB,mBAAmB;AAE3D,oBAAc,uBAAuB;QACnC;QACA,qBAAAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uBAAuB,QAAQ;QAChD,oBAAoB,sBAAqB;OAC1C;IACH;EACF;AAEA,QAAM,kBAAkB,CAAC,UAA+B;AACtD,QAAI,qBAAqB;AACvB,sBAAgB,mBAAmB;IACrC;AAEA,wBAAoB,UAAU,EAAE,MAAM,UAAU,QAAQ,aAAY,GAAI,KAAK;EAC/E;AAEA,QAAM,iBAAiB,CAAC,UAAiD;AACvE,UAAM,EAAE,QAAQ,SAAS,SAAS,SAAQ,IAAK;AAC/C,UAAM,SAAS,YAAY,QAAQ,MAAM,SAAS;AAGlD,2BAAuB,SAAS,EAAE,QAAQ,QAAQ,SAAS,SAAS,SAAQ,CAAE;EAChF;AAEA,QAAM,kBAAkB,CAAC,UAA2B;AAClD,QAAI,iBAAiB,KAAK,GAAG;AAC3B,sBAAgB,KAAK;IACvB;AACA,mBAAe,KAAK;EACtB;AAEA,QAAM,oBAAoB,CAAC,UAA2B;AACpD,oBAAgB,KAAK;AACrB,mBAAe,KAAK;EACtB;AAEA,QAAM,sBAAsB,CAAC,UAA8B;AACzD,QAAI,MAAM,YAAY,QAAQ,SAAS,MAAM,YAAY,QAAQ,OAAO;AACtE,YAAM,eAAc;AACpB,sBAAgB,KAAK;AACrB,qBAAe,KAAK;IACtB;EACF;AAEA,QAAM,cAAU,qBAAoB,IAAI;AACxC,QAAM,kBAAkB,iBAAgB;AACxC,kBAAgB,KAAK,OAAO;AAG5B,QAAM,oBAAoB,YAAY,mBAAmB,CAAC;AAE1D,QAAM,cAAc;IAClB,IAAI;IACJ,GAAG;IACH,KAAK,aAAa,SAAS,iBAAiB;IAC5C,WAAW,eACT,mBAAO,MACP,UAAU,WACV,oBAAoB,mBAAO,SAAS,MACpC,mBAAO,gBAAgB,OAAO,CAAC,GAC/B,mBAAO,iBAAiB,SAAS,QAAQ,CAAC,GAC1C,mBAAO,cAAc,SAAS,KAAK,CAAC,CAAC;IAEvC,OAAO,cAAc,KAAK;IAC1B,cAAc;IACd,mBAAmB;IACnB,CAAC,sBAAsB,GAAG;;AAG5B,MAAI,YAAY,UAAU,4BAA4B,CAAC,WAAW;AAChE,gBAAY,iBAAiB,IAAI,GAAG,YAAY,EAAE,IAAI,MAAM,IAAI,wBAAwB;EAC1F;AAEA,QAAM,gCAAgC,KAAK,yBAAyB,qBAAqB;AACzF,QAAM,UACJ,aAAAD,QAAA;IAAA,aAAAA,QAAA;IAAA;IACG;IACA,YACC,aAAAA,QAAA;MAAA;MAAA,EAAM,WAAW,mBAAO,cAAc,EAAC;;MAErC,aAAAA,QAAA;QAAA;QAAA,EACE,WAAW,mBAAO,MAAI,cACV,+BACZ,MAAM,gCAAgC,QAAQ,OAAS;QAEvD,aAAAA,QAAA,cAAC,kBAAY,EAAC,MAAK,YAAW,MAAK,UAAS,CAAA;MAAG;IAC1C;IAGV,YAAY,UACX,aAAAA,QAAA,cAAA,QAAA,EAAM,QAAQ,MAAM,IAAI,OAAM,GAAA,GAAA;EAG/B;AAIL,QAAM,EAAE,SAAQ,IAAK,2BAA2B,SAAS,EAAE,UAAU,WAAW,IAAI,OAAS,CAAE;AAE/F,MAAI,UAAU;AACZ,WACE,aAAAA,QAAA,cAAC,gCAAoB,EAAA,GACf,aACJ,KAAI,KACJ,eAAc,QACd,kBACA,MAAK,UACL,UACA,WAAW,qBACX,SAAS,kBAAiB,GAEzB,OAAO;EAGd;AAEA,SACE,aAAAA,QAAA,cAAC,gCAAoB,EAAA,GACf,aACJ,KAAI,KACJ,eAAc,QACd,kBACA,UACA,QAAQ,cACR,KAAK,WACL,MACA,SAAS,gBAAe,GAEvB,OAAO;AAGd,CAAC;AAGH,SAAS,gBAAgB,SAAyD;AAChF,SAAO,WAAW,QAAQ,QAAQ,WAAW,EAAE,CAAC;AAClD;AAEA,SAAS,iBAAiB,SAAuC,UAAuC;AACtG,UAAQ,SAAS;IACf,KAAK;AACH,aAAO;IACT,KAAK;AACH,aAAO;IACT;AACE,aAAO,aAAa,QAAQ;EAChC;AACF;AAEA,SAAS,cAAc,SAAuC,OAAiC;AAC7F,SAAO,SAAS,YAAY,SAAS,WAAW,KAAK;AACvD;AAEA,IAAAE,oBAAe;",
  "names": ["React", "funnelInteractionId", "internal_default"]
}
