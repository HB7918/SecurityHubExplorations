{"version":3,"file":"wizard-step-list.js","sourceRoot":"","sources":["../../../src/wizard/wizard-step-list.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\n\nimport { useUniqueId } from '@cloudscape-design/component-toolkit/internal';\n\nimport { getNavigationActionDetail } from './analytics-metadata/utils';\nimport { WizardProps } from './interfaces';\n\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\nimport styles from './styles.css.js';\n\nexport const StepStatusValues = {\n  Active: 'active',\n  Visited: 'visited',\n  Unvisited: 'unvisited',\n  Next: 'next',\n} as const;\n\nexport type StepStatus = (typeof StepStatusValues)[keyof typeof StepStatusValues];\n\nexport interface WizardStepListProps {\n  activeStepIndex: number;\n  farthestStepIndex: number;\n  allowSkipTo: boolean;\n  i18nStrings: WizardProps.I18nStrings;\n  isLoadingNextStep: boolean;\n  onStepClick: (stepIndex: number) => void;\n  onSkipToClick: (stepIndex: number) => void;\n  steps: ReadonlyArray<WizardProps.Step>;\n}\n\nexport function getStepStatus(\n  index: number,\n  activeStepIndex: number,\n  farthestStepIndex: number,\n  isLoadingNextStep: boolean,\n  allowSkipTo: boolean,\n  steps: ReadonlyArray<{ isOptional?: boolean }>\n): StepStatus {\n  if (activeStepIndex === index) {\n    return StepStatusValues.Active;\n  }\n  if (isLoadingNextStep) {\n    return StepStatusValues.Unvisited;\n  }\n  if (farthestStepIndex >= index) {\n    return StepStatusValues.Visited;\n  }\n  if (allowSkipTo && index > activeStepIndex) {\n    // Can we skip to this step? (all steps between current and this one are optional)\n    if (canSkip(activeStepIndex + 1, index, steps)) {\n      return StepStatusValues.Next;\n    }\n    // Immediate next step is also navigable if it's optional\n    if (index === activeStepIndex + 1 && steps[index]?.isOptional) {\n      return StepStatusValues.Next;\n    }\n  }\n  return StepStatusValues.Unvisited;\n}\n\nexport function canSkip(fromIndex: number, toIndex: number, steps: ReadonlyArray<{ isOptional?: boolean }>): boolean {\n  // Can't skip if there are no steps to skip over\n  if (fromIndex >= toIndex) {\n    return false;\n  }\n  for (let i = fromIndex; i < toIndex; i++) {\n    if (!steps[i].isOptional) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function handleStepNavigation(\n  stepIndex: number,\n  status: StepStatus,\n  onStepClick: (index: number) => void,\n  onSkipToClick: (index: number) => void\n): void {\n  if (status === StepStatusValues.Visited) {\n    onStepClick(stepIndex);\n  } else if (status === StepStatusValues.Next) {\n    onSkipToClick(stepIndex);\n  }\n}\n\nexport default function WizardStepList({\n  activeStepIndex,\n  farthestStepIndex,\n  allowSkipTo,\n  i18nStrings,\n  isLoadingNextStep,\n  onStepClick,\n  onSkipToClick,\n  steps,\n}: WizardStepListProps) {\n  return (\n    <ul className={styles.refresh}>\n      {steps.map((step, index) => (\n        <WizardStepListItem\n          key={index}\n          index={index}\n          step={step}\n          activeStepIndex={activeStepIndex}\n          farthestStepIndex={farthestStepIndex}\n          allowSkipTo={allowSkipTo}\n          i18nStrings={i18nStrings}\n          isLoadingNextStep={isLoadingNextStep}\n          onStepClick={onStepClick}\n          onSkipToClick={onSkipToClick}\n          steps={steps}\n        />\n      ))}\n    </ul>\n  );\n}\n\ninterface WizardStepListItemProps {\n  index: number;\n  step: WizardProps.Step;\n  activeStepIndex: number;\n  farthestStepIndex: number;\n  allowSkipTo: boolean;\n  i18nStrings: WizardProps.I18nStrings;\n  isLoadingNextStep: boolean;\n  onStepClick: (stepIndex: number) => void;\n  onSkipToClick: (stepIndex: number) => void;\n  steps: ReadonlyArray<WizardProps.Step>;\n}\n\nfunction WizardStepListItem({\n  index,\n  step,\n  activeStepIndex,\n  farthestStepIndex,\n  allowSkipTo,\n  i18nStrings,\n  isLoadingNextStep,\n  onStepClick,\n  onSkipToClick,\n  steps,\n}: WizardStepListItemProps) {\n  const status = getStepStatus(index, activeStepIndex, farthestStepIndex, isLoadingNextStep, allowSkipTo, steps);\n  const isClickable = status === StepStatusValues.Visited || status === StepStatusValues.Next;\n  const stepLabel = i18nStrings.stepNumberLabel?.(index + 1);\n  const fullStepLabel = `${stepLabel}: ${step.title}`;\n  const optionalDescriptionId = useUniqueId('wizard-step-optional-');\n  const state = {\n    active: 'active',\n    unvisited: 'disabled',\n    visited: 'enabled',\n    next: 'enabled',\n  }[status];\n\n  const handleInteraction = () => handleStepNavigation(index, status, onStepClick, onSkipToClick);\n\n  return (\n    <li className={clsx(styles[`${state}`], styles['navigation-link-item'])}>\n      <hr />\n\n      <span className={clsx(styles.number, styles['navigation-link-label'])}>\n        {i18nStrings.stepNumberLabel?.(index + 1)}\n        {step.isOptional && <i id={optionalDescriptionId}>{` - ${i18nStrings.optional}`}</i>}\n      </span>\n\n      <a\n        className={clsx(styles['navigation-link'], {\n          [styles['navigation-link-active']]: status === StepStatusValues.Active,\n          [styles['navigation-link-disabled']]: status === StepStatusValues.Unvisited,\n        })}\n        aria-current={status === StepStatusValues.Active ? 'step' : undefined}\n        aria-disabled={status === StepStatusValues.Unvisited ? 'true' : undefined}\n        onClick={event => {\n          event.preventDefault();\n          handleInteraction();\n        }}\n        onKeyDown={event => {\n          if (event.key === ' ' || event.key === 'Enter') {\n            event.preventDefault();\n          }\n          // Enter activates the button on key down instead of key up.\n          if (event.key === 'Enter') {\n            handleInteraction();\n          }\n        }}\n        onKeyUp={event => {\n          // Emulate button behavior, which also fires on space.\n          if (event.key === ' ') {\n            handleInteraction();\n          }\n        }}\n        role=\"button\"\n        tabIndex={isClickable ? 0 : undefined}\n        aria-label={fullStepLabel}\n        aria-describedby={step.isOptional ? optionalDescriptionId : undefined}\n        {...(status === StepStatusValues.Unvisited\n          ? {}\n          : getNavigationActionDetail(index, 'step', true, `.${analyticsSelectors['step-title']}`))}\n      >\n        <div className={styles.circle} />\n\n        <span className={clsx(styles.title, analyticsSelectors['step-title'])}>{step.title}</span>\n      </a>\n    </li>\n  );\n}\n"]}