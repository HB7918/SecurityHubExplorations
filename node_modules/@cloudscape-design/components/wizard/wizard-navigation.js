// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
import React from 'react';
import clsx from 'clsx';
import { useUniqueId } from '@cloudscape-design/component-toolkit/internal';
import InternalBox from '../box/internal';
import { useVisualRefresh } from '../internal/hooks/use-visual-mode';
import InternalLink from '../link/internal';
import { getNavigationActionDetail } from './analytics-metadata/utils';
import WizardStepList, { getStepStatus, StepStatusValues } from './wizard-step-list';
import analyticsSelectors from './analytics-metadata/styles.css.js';
import styles from './styles.css.js';
export default function Navigation({ activeStepIndex, farthestStepIndex, allowSkipTo, hidden, i18nStrings, isLoadingNextStep, onStepClick, onSkipToClick, steps, }) {
    const isVisualRefresh = useVisualRefresh();
    return (React.createElement("nav", { className: clsx(styles.navigation, hidden && styles.hidden, isVisualRefresh && styles.refresh), "aria-label": i18nStrings.navigationAriaLabel }, isVisualRefresh ? (React.createElement(WizardStepList, { activeStepIndex: activeStepIndex, farthestStepIndex: farthestStepIndex, allowSkipTo: allowSkipTo, i18nStrings: i18nStrings, isLoadingNextStep: isLoadingNextStep, onStepClick: onStepClick, onSkipToClick: onSkipToClick, steps: steps })) : (React.createElement("ul", null, steps.map((step, index) => {
        const status = getStepStatus(index, activeStepIndex, farthestStepIndex, isLoadingNextStep, allowSkipTo, steps);
        return (React.createElement(NavigationStepClassic, { i18nStrings: i18nStrings, index: index, key: index, onStepClick: onStepClick, onSkipToClick: onSkipToClick, status: status, step: step }));
    })))));
}
function NavigationStepClassic({ i18nStrings, index, onStepClick, onSkipToClick, status, step }) {
    const spanClassName = clsx(styles['navigation-link'], status === StepStatusValues.Active ? styles['navigation-link-active'] : styles['navigation-link-disabled']);
    const optionalDescriptionId = useUniqueId('wizard-step-optional-');
    return (React.createElement("li", { className: styles['navigation-link-item'], ...(status === StepStatusValues.Unvisited
            ? {}
            : getNavigationActionDetail(index, 'step', true, `.${analyticsSelectors['step-title']}`)) },
        React.createElement(InternalBox, { variant: "small", className: styles['navigation-link-label'], display: "block", margin: { bottom: 'xxs' } },
            i18nStrings.stepNumberLabel && i18nStrings.stepNumberLabel(index + 1),
            step.isOptional && React.createElement("i", { id: optionalDescriptionId }, ` - ${i18nStrings.optional}`)),
        React.createElement("div", null, status === StepStatusValues.Visited || status === StepStatusValues.Next ? (React.createElement(InternalLink, { className: clsx(styles['navigation-link'], analyticsSelectors['step-title']), onFollow: evt => {
                evt.preventDefault();
                if (status === StepStatusValues.Visited) {
                    onStepClick(index);
                }
                else {
                    onSkipToClick(index);
                }
            }, variant: "primary", nativeAttributes: step.isOptional ? { 'aria-describedby': optionalDescriptionId } : undefined }, step.title)) : (React.createElement("span", { className: clsx(spanClassName, analyticsSelectors['step-title']), "aria-current": status === StepStatusValues.Active ? 'step' : undefined, "aria-disabled": status === StepStatusValues.Active ? undefined : 'true', "aria-describedby": step.isOptional ? optionalDescriptionId : undefined }, step.title)))));
}
//# sourceMappingURL=wizard-navigation.js.map